{% extends 'cal/base.html' %}

{% block head_extra %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <script>
/* these three code snippets enable data to be collected from the modals and
acted upon. */


/* listener cleans out the hidden input data repository when a modal is shown */
$(document).on('show.bs.modal', function (event) {
    $('#next_url').val('');
})

/* method attached to modal action buttons via onclick puts the redirection
target in the hidden input and hides the modal */
function next_url(modal_label, href) {
    $('#next_url').val(href);
    $('#'+modal_label).modal("hide");
}

/* listener redirects the web page according to the contents of the hidden input
after the modal has closed */
$(document).on('hidden.bs.modal', function (event) {
    if ($('#next_url').val()) {
        location.href = $('#next_url').val();
    }
})
    </script>

{% endblock head_extra %}


{% block calendar_content %} {# invoke this as super from child template #}
<input type="hidden" id="next_url"> <!-- storage for modal redirect trigger -->
{% endblock calendar_content %}

